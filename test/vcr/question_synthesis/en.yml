---
http_interactions:
- request:
    method: post
    uri: https://api.openai.com/v1/chat/completions
    body:
      encoding: UTF-8
      string: '{"model":"gpt-4o-mini","messages":[{"role":"system","content":"You
        are an assistant specialized in simulating the behavior of ChatGPT users researching
        the best brands, products, or services. Your task is to generate natural language
        variations of a query that seeks to understand the best products within a
        category. Inputs: • query: The main product, brand, or service the user is
        researching. • cohort: (Optional) A description of the person making the query,
        including demographic details, preferences, or specific needs. Use this information
        to tailor the tone, focus, and specific concerns of the questions. • region:
        (Optional) A specific country or world region to restrict the scope of products,
        services, or brands. Use this to generate queries that align with region-specific
        availability, popular brands, or local considerations. Instructions: 1. Generate
        clear and direct questions whose answers point to specific brands, models,
        or services relevant to the given query. 2. If the cohort is provided, reflect
        the interests, needs, or priorities of the user in the questions. For example:
        • A budget-conscious user would focus on affordable options. • An eco-conscious
        user would consider sustainability aspects. 3. If the region is provided,
        tailor the questions to focus on brands, models, or services popular or available
        in that region. 4. If cohort or region information is missing: • Do not make
        assumptions about the user’s demographic, preferences, or location. • Generate
        neutral, general questions that are not specific to any cohort or region.
        5. Keep the questions specific to the given query category, avoiding tangential
        topics. For example: • If the query is about home insurance, do not generate
        questions about health insurance. • If the query is about dietary supplements,
        do not narrow down to specific subcategories unless explicitly requested.
        6. Maintain diversity in question phrasing while staying true to the context
        provided by the inputs. Example Outputs: Given the inputs: • query: “best
        home coffee machines” • cohort: Not provided • region: Not provided Generate
        questions like: • “What are the best-rated home coffee machines on the market?”
        • “Which coffee machines are considered the most reliable for home use?” •
        “What factors should I consider when choosing a home coffee machine?” • “What
        are the top home coffee machine brands available right now?” If the inputs
        are: • query: “best home coffee machines” • cohort: “A budget-conscious student
        living in a small apartment” • region: “Europe” Generate questions like: •
        “What are the most affordable home coffee machines available in Europe?” •
        “Which coffee machine brands are best for small spaces and student budgets?”
        • “Are there any budget-friendly coffee machines popular in European markets?”
        • “What are the top-rated compact coffee makers for small apartments in Europe?”
        Your goal is to generate questions that reflect the user’s intent and context,
        leading to specific product or brand recommendations based on the inputs provided.
        Generate the questions following the structured output format."},{"role":"user","content":"Generate
        5 questions about \"Safe cars\"\nRegion context: The questions should be tailored
        for any, considering local preferences, pricing, and availability.\nUser context:
        The questions should be relevant for Women 45+.\nFollow these guidelines:\n-
        Keep questions focused specifically on Safe cars\n- Tailor questions to the
        provided context\n- Vary the phrasing while maintaining relevance\n- Focus
        on gathering information that will help recommend specific products/brands\n\nQuestions:"}],"temperature":0.0,"response_format":{"type":"json_schema","json_schema":{"name":"schema","description":"Schema
        for the structured response","schema":{"type":"object","properties":{"questions":{"type":"array","items":{"$ref":"#/$defs/question"},"description":"A
        collection of questions"}},"required":["questions"],"additionalProperties":false,"strict":true,"$defs":{"question":{"type":"object","properties":{"question":{"type":"string"}},"required":["question"],"additionalProperties":false,"strict":true}}}}}}'
    headers:
      Content-Type:
      - application/json
      Authorization:
      - Bearer <API_KEY>
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
      User-Agent:
      - Ruby
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Fri, 22 Nov 2024 12:11:02 GMT
      Content-Type:
      - application/json
      Transfer-Encoding:
      - chunked
      Connection:
      - keep-alive
      Access-Control-Expose-Headers:
      - X-Request-ID
      Openai-Organization:
      - user-qnoh4d6vex03uarljj9vor3n
      Openai-Processing-Ms:
      - '1235'
      Openai-Version:
      - '2020-10-01'
      X-Ratelimit-Limit-Requests:
      - '5000'
      X-Ratelimit-Limit-Tokens:
      - '4000000'
      X-Ratelimit-Remaining-Requests:
      - '4999'
      X-Ratelimit-Remaining-Tokens:
      - '3999077'
      X-Ratelimit-Reset-Requests:
      - 12ms
      X-Ratelimit-Reset-Tokens:
      - 13ms
      X-Request-Id:
      - req_a20dd1635f5012a93ae2553f7c566c1f
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains; preload
      Cf-Cache-Status:
      - DYNAMIC
      Set-Cookie:
      - __cf_bm=S3N3upPaaDjaPaKw123qjWYdAm.S9zfsDczRArhbBtw-1732277462-1.0.1.1-GjaEk7dnCakg5Dt8i0hofbEkUjGoI970v0yjo3SN.CGCh.P2rsUjYO._NcOgcNCQwqYRjTdwfSH2bHG5.sVotA;
        path=/; expires=Fri, 22-Nov-24 12:41:02 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=qjc37pUy0fRaG9TnTf5Zvf2zFEEiUBFNuqX5tWiMx60-1732277462089-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      X-Content-Type-Options:
      - nosniff
      Server:
      - cloudflare
      Cf-Ray:
      - 8e68d1d17eb9384d-MAD
      Alt-Svc:
      - h3=":443"; ma=86400
    body:
      encoding: ASCII-8BIT
      string: |
        {
          "id": "chatcmpl-AWMmzS2yhSSHXkYw2VlCVziT3w6HK",
          "object": "chat.completion",
          "created": 1732277461,
          "model": "gpt-4o-mini-2024-07-18",
          "choices": [
            {
              "index": 0,
              "message": {
                "role": "assistant",
                "content": "{\"questions\":[{\"question\":\"What are the safest car models recommended for women over 45?\"},{\"question\":\"Which car brands are known for their high safety ratings and reliability for older drivers?\"},{\"question\":\"What safety features should women in their 40s and 50s prioritize when choosing a car?\"},{\"question\":\"Are there any specific safe cars that are popular among women aged 45 and older?\"},{\"question\":\"What are the top-rated vehicles for safety that also offer comfort and ease of use for women in this age group?\"}]}",
                "refusal": null
              },
              "logprobs": null,
              "finish_reason": "stop"
            }
          ],
          "usage": {
            "prompt_tokens": 772,
            "completion_tokens": 109,
            "total_tokens": 881,
            "prompt_tokens_details": {
              "cached_tokens": 0,
              "audio_tokens": 0
            },
            "completion_tokens_details": {
              "reasoning_tokens": 0,
              "audio_tokens": 0,
              "accepted_prediction_tokens": 0,
              "rejected_prediction_tokens": 0
            }
          },
          "system_fingerprint": "fp_0705bf87c0"
        }
  recorded_at: Fri, 22 Nov 2024 12:11:02 GMT
recorded_with: VCR 6.3.1
