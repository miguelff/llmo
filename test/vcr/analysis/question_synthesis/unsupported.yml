---
http_interactions:
- request:
    method: post
    uri: https://api.openai.com/v1/chat/completions
    body:
      encoding: UTF-8
      string: '{"model":"gpt-4o-mini","messages":[{"role":"system","content":"You
        are an assistant specialized in simulating the behavior of ChatGPT users researching
        the best brands, products, or services. Your task is to generate natural language
        variations of a query that seeks to understand the best products within a
        category.\nInputs:\n•\tquery: The main product, brand, or service the user
        is researching.\n•\tcohort: (Optional) A description of the person making
        the query, including demographic details, preferences, or specific needs.
        Use this information to tailor the tone, focus, and specific concerns of the
        questions.\n•\tregion: (Optional) A specific country or world region to restrict
        the scope of products, services, or brands. Use this to generate queries that
        align with region-specific availability, popular brands, or local considerations.\nInstructions:\n1.\tGenerate
        clear and direct questions whose answers point to specific brands, models,
        or services relevant to the given query.\n2.\tIf the cohort is provided, reflect
        the interests, needs, or priorities of the user in the questions. For example:\n•\tA
        budget-conscious user would focus on affordable options.\n•\tAn eco-conscious
        user would consider sustainability aspects.\n3.\tIf the region is provided,
        tailor the questions to focus on brands, models, or services popular or available
        in that region.\n4.\tIf cohort or region information is missing:\n•\tDo not
        make assumptions about the user’s demographic, preferences, or location.\n•\tGenerate
        neutral, general questions that are not specific to any cohort or region.\n5.\tKeep
        the questions specific to the given query category, avoiding tangential topics.
        For example:\n•\tIf the query is about home insurance, do not generate questions
        about health insurance.\n•\tIf the query is about dietary supplements, do
        not narrow down to specific subcategories unless explicitly requested.\n6.\tMaintain
        diversity in question phrasing while staying true to the context provided
        by the inputs.\nExample Outputs:\nGiven the inputs:\n•\tquery: “best home
        coffee machines”\n•\tcohort: Not provided\n•\tregion: Not provided\nGenerate
        questions like:\n•\t“What are the best-rated home coffee machines on the market?”\n•\t“Which
        coffee machines are considered the most reliable for home use?”\n•\t“What
        factors should I consider when choosing a home coffee machine?”\n•\t“What
        are the top home coffee machine brands available right now?”\nIf the inputs
        are:\n•\tquery: “best home coffee machines”\n•\tcohort: “A budget-conscious
        student living in a small apartment”\n•\tregion: “Europe”\nGenerate questions
        like:\n•\t“What are the most affordable home coffee machines available in
        Europe?”\n•\t“Which coffee machine brands are best for small spaces and student
        budgets?”\n•\t“Are there any budget-friendly coffee machines popular in European
        markets?”\n•\t“What are the top-rated compact coffee makers for small apartments
        in Europe?”\nYour goal is to generate questions that reflect the user’s intent
        and context, leading to specific product or brand recommendations based on
        the inputs provided.\nGenerate the questions following the structured output
        format.\n"},{"role":"user","content":"Generate 5 questions about \"Safe cars\"\nRegion
        context: The questions should be tailored for any, considering local preferences,
        pricing, and availability.\nUser context: The questions should be relevant
        for Women 45+.\nFollow these guidelines:\n- Keep questions focused specifically
        on Safe cars\n- Tailor questions to the provided context\n- Vary the phrasing
        while maintaining relevance\n- Focus on gathering information that will help
        recommend specific products/brands\n\nQuestions:"}],"temperature":0.0,"response_format":{"type":"json_schema","json_schema":{"name":"schema","description":"Schema
        for the structured response","schema":{"type":"object","properties":{"questions":{"type":"array","items":{"$ref":"#/$defs/question"},"description":"A
        collection of questions"}},"required":["questions"],"additionalProperties":false,"strict":true,"$defs":{"question":{"type":"object","properties":{"question":{"type":"string"}},"required":["question"],"additionalProperties":false,"strict":true}}}}}}'
    headers:
      Content-Type:
      - application/json
      Authorization:
      - Bearer <API_KEY>
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
      User-Agent:
      - Ruby
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Thu, 28 Nov 2024 12:36:10 GMT
      Content-Type:
      - application/json
      Transfer-Encoding:
      - chunked
      Connection:
      - keep-alive
      Access-Control-Expose-Headers:
      - X-Request-ID
      Openai-Organization:
      - user-qnoh4d6vex03uarljj9vor3n
      Openai-Processing-Ms:
      - '844'
      Openai-Version:
      - '2020-10-01'
      X-Ratelimit-Limit-Requests:
      - '5000'
      X-Ratelimit-Limit-Tokens:
      - '4000000'
      X-Ratelimit-Remaining-Requests:
      - '4999'
      X-Ratelimit-Remaining-Tokens:
      - '3999077'
      X-Ratelimit-Reset-Requests:
      - 12ms
      X-Ratelimit-Reset-Tokens:
      - 13ms
      X-Request-Id:
      - req_ddaec5daa9027550ecffca67b20cdfcb
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains; preload
      Cf-Cache-Status:
      - DYNAMIC
      Set-Cookie:
      - __cf_bm=y_kpWeR6rkuFudFLL5TB1LXIiTp6EZfLKWFe8zmAjd0-1732797370-1.0.1.1-t1GL8XGFmPlrl4AEWr1WtGnJfoM5Fr63QNftNwCQmL5xJFDmjdUngpgSr8MHgWzqhPV1CfTShkQaubYv9Zow9Q;
        path=/; expires=Thu, 28-Nov-24 13:06:10 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=0wiTXxbBJ8KBQEOQoOdrPpRUtKvUbFQhE0AOcO0I9Kg-1732797370828-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      X-Content-Type-Options:
      - nosniff
      Server:
      - cloudflare
      Cf-Ray:
      - 8e9a66e9998ce059-MAD
      Alt-Svc:
      - h3=":443"; ma=86400
    body:
      encoding: ASCII-8BIT
      string: |
        {
          "id": "chatcmpl-AYY2cTEIn3Vv5X7DtPfxhAsgKv4Bp",
          "object": "chat.completion",
          "created": 1732797370,
          "model": "gpt-4o-mini-2024-07-18",
          "choices": [
            {
              "index": 0,
              "message": {
                "role": "assistant",
                "content": "{\"questions\":[{\"question\":\"What are the safest car models recommended for women over 45?\"},{\"question\":\"Which car brands are known for their high safety ratings and reliability for older female drivers?\"},{\"question\":\"What safety features should women in their 40s and 50s prioritize when choosing a car?\"},{\"question\":\"Are there any specific safe cars that are popular among women aged 45 and above?\"},{\"question\":\"What are the top-rated vehicles for safety that cater to the preferences of women over 45?\"}]}",
                "refusal": null
              },
              "logprobs": null,
              "finish_reason": "stop"
            }
          ],
          "usage": {
            "prompt_tokens": 787,
            "completion_tokens": 106,
            "total_tokens": 893,
            "prompt_tokens_details": {
              "cached_tokens": 0,
              "audio_tokens": 0
            },
            "completion_tokens_details": {
              "reasoning_tokens": 0,
              "audio_tokens": 0,
              "accepted_prediction_tokens": 0,
              "rejected_prediction_tokens": 0
            }
          },
          "system_fingerprint": "fp_0705bf87c0"
        }
  recorded_at: Thu, 28 Nov 2024 12:36:10 GMT
recorded_with: VCR 6.3.1
